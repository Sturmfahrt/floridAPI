<!DOCTYPE html>
<head>
    <title>List Hotel Room</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="design.css">
</head>
<body>
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
                <a class="navbar-brand" href="#" style="display: block; margin: 0 auto;">
                <img src="assets/icons/png/icon.png" alt="Logo" style="width:40px; ">
                </a>
                </div>
        </nav>
        <div class="container-fluid">
            <form>
                <div class="form-group">
                <label for="exampleInputEmail1">Hotel Name</label>
                <input type="email" class="form-control" id="hotelName" aria-describedby="emailHelp" placeholder="Enter Hotel Name">
                <small id="emailHelp" class="form-text text-muted">Enter the hotel name of the room you wish to find.</small>
                </div>
                <div class="form-group">
                    <label for="exampleInputEmail1">Room Number</label>
                    <input type="email" class="form-control" id="roomNumber" aria-describedby="emailHelp" placeholder="Enter Room Number">
                    <small id="emailHelp" class="form-text text-muted">Enter the room number of the room you wish to find.</small>
                    </div>
                <button type="submit" class="btn btn-primary" onclick="listIt()">Submit</button>
            </form>
        </div>
        <div class="container-fluid">
            <h3 style="text-align: center">Results:</h3>
            <p id="Hotel"></p>
        </div>
    <script>
        const electron = require('electron');
        const {ipcRenderer} = electron;
        const bodyParser = require('body-parser');

    function listIt() { //This function gets the data from server and displays it
        var url  = "http://localhost:3000/hotels/listhotelroom"; //sets the url
        var xhr  = new XMLHttpRequest() //declares XMLHttpRequest object
        var hotelName = document.getElementById("hotelName").value; // declares a variable as the value of the hotelName form
        var roomNumber = document.getElementById("roomNumber").value; // declares a variable as the value of the roomNumber form
        xhr.open('GET', url+'?hotelName='+hotelName+"&roomNumber="+roomNumber, true)
        xhr.onload = function () {
	    if (xhr.readyState == 4 && xhr.status == "200") {
            var users = JSON.parse(xhr.responseText);
            var name = users[0].hotelName;
            console.log(name);
		    console.table(users);
	    } else {
		    console.error(users);
	    }
    }
    xhr.send(null);
    }
    </script>
</body>
</html>